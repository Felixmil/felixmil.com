{
  "hash": "31040187c27bfba585e7ddeb5bebfa7a",
  "result": {
    "markdown": "---\ntitle: \"Advent of Code - Day 7: Tuning Trouble\"\nsubtitle: \"Seventh day of the advent of code using R\"\ndate: 2022-12-07\ncategories: \"advent of code\"\ndraft: true\n\nformat: \n   html:\n     df-print: paged\neditor: \n  markdown: \n    wrap: 80\n    \n\nexecute: \n  error: true\n---\n\n\n\n\n\n# Part\n\n\n## Input\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsample <-   readLines(\"sample.txt\")\n\nsample\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"$ cd /\"         \"$ ls\"           \"dir a\"          \"14848514 b.txt\" \"8504156 c.dat\"  \"dir d\"          \"$ cd a\"         \"$ ls\"           \"dir e\"         \n[10] \"29116 f\"        \"2557 g\"         \"62596 h.lst\"    \"$ cd e\"         \"$ ls\"           \"584 i\"          \"$ cd ..\"        \"$ cd ..\"        \"$ cd d\"        \n[19] \"$ ls\"           \"4060174 j\"      \"8033020 d.log\"  \"5626152 d.ext\"  \"7214296 k\"     \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ninput <- readLines(\"input.txt\")\n\nhead(input, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"$ cd /\"             \"$ ls\"               \"233998 glh.fcb\"     \"184686 jzn\"         \"dir qcznqph\"        \"dir qtbprrq\"        \"299692 rbssdzm.ccn\"\n [8] \"dir vtb\"            \"$ cd qcznqph\"       \"$ ls\"              \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(stringr)\nlibrary(fs)\n```\n:::\n\n\n\n## Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# input <- sample\n\nparse_terminal <- function(input) {\n  \n  i = 3\n  path = c(\"/\")\n  filesystem <- list(\"/\" = list())\n  \n  message(\"starting\")\n  \n  while (i <= length(input)) {\n    if (str_detect(input[i], \"\\\\$\")) {\n      if (str_detect(input[i], \"cd\")) {\n        if (str_detect(input[i], \"\\\\.\\\\.\")) {\n          path <-  path[1:(length(path)-1)]\n          message(\"moving outside:\", path)\n        } else {\n          dir_name <- str_extract(input[i], \"\\\\w+$\")\n          path <-  c(path,  paste0(dir_name, \"/\"))\n          message(\"moving inside:\", path)\n        }\n        \n      }\n    } else {\n      if (str_detect(input[i], \"^dir\")) {\n        dir_name <- str_extract(input[i], \"\\\\w+$\")\n        filesystem[[path]][[paste0(dir_name,\"/\")]] <- list()\n      } else {\n        file_name <- str_extract(input[i], \"\\\\w+(\\\\.\\\\w+)?$\")\n        file_size <- as.numeric(str_extract(input[i], \"^\\\\d+\"))\n        filesystem[[path]][[file_name]] <- file_size\n      }\n      \n    }\n    i <- i+1\n  }\n  \n  return(filesystem)\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfilesystem <- parse_terminal(sample)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(purrr)\n\nget_dir_size <- function(dir) {\n\n  # browser()\n  dir_size <- 0\n  \n  for (e in dir) {\n    if (is.list(e)) {\n      subdir_size <- get_dir_size(e)\n      dir_size <- dir_size + subdir_size\n    } else {\n      dir_size <- dir_size + e\n    }\n  }\n  \n  if (dir_size < 100000) {\n    print(names(dir)[1])\n    print(dir_size)\n    return(dir_size)\n  } else {\n    return(0)\n  }\n\n}\n\nreduce(filesystem, get_dir_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$`a/`\n$`a/`$`e/`\n$`a/`$`e/`$i\n[1] 584\n\n\n$`a/`$f\n[1] 29116\n\n$`a/`$g\n[1] 2557\n\n$`a/`$h.lst\n[1] 62596\n\n\n$b.txt\n[1] 14848514\n\n$c.dat\n[1] 8504156\n\n$`d/`\n$`d/`$j\n[1] 4060174\n\n$`d/`$d.log\n[1] 8033020\n\n$`d/`$d.ext\n[1] 5626152\n\n$`d/`$k\n[1] 7214296\n```\n:::\n:::\n\n\n\n\n## Result\n\n\n\n# Part 2\n\n## Code\n\n\n## Result\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}